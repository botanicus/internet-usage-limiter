#!/usr/bin/env ruby

require 'internet-usage-limiter'

unless (1..2).include?(ARGV.length)
  abort "Usage: #{$0} [purpose of the session] [time in minutes (defaults to 10)]"
end

reason = ARGV.shift
minutes = (ARGV.shift || 10).to_i

log_file_path = InternetUsageLimiter.config.log_file_path

from, to = Time.now, Time.now + minutes * 60

File.open(log_file_path, 'a') do |file|
  file.puts("#{from.strftime("%d/%m/%Y %H:%M")} - #{to.strftime("%H:%M")} (#{minutes}min) #{reason}")
end
